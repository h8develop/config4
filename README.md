# Assembler and Interpreter

## Описание проекта

Этот проект реализует ассемблер и интерпретатор для простого набора инструкций. Он позволяет:
1. Транслировать ассемблерный код (в формате `.asm`) в бинарный формат.
2. Выполнять бинарный код с интерпретацией инструкций, используя виртуальную память.
3. Логировать выполнение инструкций и сохранять результаты в формате CSV.

Проект состоит из следующих основных компонентов:
- **Ассемблер**: Преобразует текстовый код в бинарные инструкции.
- **Интерпретатор**: Выполняет бинарные инструкции, изменяя состояние виртуальной памяти.
- **Тесты**: Проверяют корректность работы ассемблера и интерпретатора.

---

## Функциональность

### Ассемблер
- Преобразует ассемблерный код (например, из `example.asm`) в бинарный файл.
- Логирует инструкции, операнды и бинарный код в файл CSV.

### Интерпретатор
- Выполняет бинарный файл, используя стек и виртуальную память.
- Поддерживает операции:
  - `LOAD_CONST`: Загрузка числа в стек.
  - `READ_MEM`: Чтение значения из памяти по адресу.
  - `WRITE_MEM`: Запись значения в память по адресу.
  - `SGN`: Вычисление знака числа (`1`, `-1`, или `0`).

---

## Структура репозитория

- **`assembler.py`**: Код ассемблера.
- **`interpreter.py`**: Код интерпретатора.
- **`instruction_set.py`**: Набор инструкций и их бинарная реализация.
- **`example.asm`**: Пример ассемблерного кода.
- **`log.csv`**: Лог работы ассемблера.
- **`result.csv`**: Результат работы интерпретатора.
- **`tests.py`**: Тесты для проверки работы проекта.

---

## Установка и запуск

1. **Клонирование репозитория:**
   ```bash
   git clone <URL>
   cd <repository>
   ```

2. **Убедитесь, что установлен Python 3.9+**

3. **Запуск ассемблера:**
   ```bash
   python assembler.py example.asm example.bin log.csv
   ```
   - `example.asm` — входной файл с ассемблерным кодом.
   - `example.bin` — выходной бинарный файл.
   - `log.csv` — лог инструкции в CSV формате.

4. **Запуск интерпретатора:**
   ```bash
   python interpreter.py example.bin result.csv 1024
   ```
   - `example.bin` — входной бинарный файл.
   - `result.csv` — выходной CSV файл с результатами выполнения.
   - `1024` — размер виртуальной памяти.

---

## Формат файлов

### Ассемблерный код (пример: `example.asm`)
Ассемблерный код состоит из инструкций и комментариев:
```asm
# Загружаем значение в стек
LOAD_CONST 256          # Загружаем число 256
WRITE_MEM 0             # Записываем его в память по адресу 0

READ_MEM 0              # Читаем из памяти
SGN                     # Вычисляем знак числа
WRITE_MEM 0             # Записываем обратно
```

### Лог ассемблера (`log.csv`)
```csv
mnemonic,operands,binary
LOAD_CONST,"['256']",0000010000
WRITE_MEM,"['0']",a200000000
READ_MEM,"['0']",ce00000000
SGN,"[]",0100000000
```

### Результат интерпретатора (`result.csv`)
```csv
Address,Value
0,1
1,-1
2,0
3,1
```

---

## Тестирование

Для запуска тестов выполните:
```bash
python tests.py
```

Примеры тестов из `tests.py`:
1. Проверка команды `LOAD_CONST`:
   - Проверяет, что бинарный код правильно формируется.
2. Проверка команды `READ_MEM`:
   - Убеждается, что значение корректно считывается из памяти.
3. Проверка команды `WRITE_MEM`:
   - Убеждается, что значение корректно записывается в память.
4. Проверка команды `SGN`:
   - Проверяет корректность вычисления знака числа.

---

## Примечания

### Особенности
- Поддерживаются только инструкции, описанные в `instruction_set.py`.
- В случае ошибки или некорректного ввода проект выдаёт детализированные исключения.

### Ограничения
- Размер памяти ограничен передаваемым параметром.
- Формат ассемблерного файла должен строго соответствовать синтаксису.

---

## Авторы

Этот проект разработан для демонстрации работы простого ассемблера и интерпретатора. Для предложений или доработок обращайтесь через репозиторий.